spring.application.name=inventory

# Server Configuration
server.port=10000 

# Logging Configuration
logging.level.bazaar.inventory.security=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.jdbc=DEBUG
logging.level.com.zaxxer.hikari=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Enable all actuator endpoints
management.endpoints.web.exposure.include=*

# Enable metrics endpoint
management.endpoint.metrics.access= unrestricted

# Enable prometheus endpoint
management.endpoint.prometheus.access=unrestricted

# Rate limiter configuration
# rate.limiter.capacity=10
# rate.limiter.leak-rate=1
# rate.limiter.cleanup.interval=300000


###################    PostgreSQL DataSource AIVEN Configuration    ###################
# === PostgreSQL DataSource Configuration ===
spring.datasource.url=jdbc:postgresql://inventory-management-system-bazaar-inventory-management-system1.h.aivencloud.com:27546/Inventory%20V1?sslmode=require&connectTimeout=30&socketTimeout=30&tcpKeepAlive=true&reWriteBatchedInserts=true
spring.datasource.username=avnadmin
spring.datasource.password=AVNS_cB9s2WenhTvLvjFbybC
spring.datasource.driver-class-name=org.postgresql.Driver

# === JPA / Hibernate Config ===
# Changed from 'validate' to 'create' to auto-create all marketplace tables
# WARNING: This will DROP and RECREATE all tables on startup!
# Use 'update' instead if you want to preserve existing data
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.connection.isolation=2
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# === Connection Pool Configuration ===
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.connection-init-sql=SET SESSION statement_timeout = '30s'

# === Hibernate Connection Management ===
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.open-in-view=false

###################    PostgreSQL DataSource AIVEN Configuration    ###################

# # Redis Configuration
# spring.cache.type=redis
# spring.redis.host=localhost
# spring.redis.port=6379
# spring.redis.timeout=60000

# # Cache Configuration
# spring.cache.redis.time-to-live=1h
# spring.cache.redis.cache-null-values=true
# spring.cache.redis.use-key-prefix=true
# spring.cache.redis.key-prefix=inventory:
# spring.data.redis.repositories.enabled=false


###################    Local Database Configuration    ###################
# # Database Configuration
# spring.datasource.url=jdbc:postgresql://localhost:5432/inventory_db
# spring.datasource.username=postgres
# spring.datasource.password=1613
# spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Hibernate Settings
#spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.format_sql=true
###################    Local Database Configuration    ###################
